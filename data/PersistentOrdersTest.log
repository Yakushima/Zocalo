/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
alter table ACCOUNTS drop constraint FKAF43ABE618085ABA
alter table ACCOUNT_HOLDINGS drop constraint FKAB0B6C024BC7993
alter table ACCOUNT_HOLDINGS drop constraint FKAB0B6C023AA42D41
alter table ACCOUNT_HOLDINGS drop constraint FKAB0B6C02F513C021
alter table ASKS drop constraint FK1ECD1A38904A85
alter table BEST_ASKS drop constraint FKF4AB869538904A85
alter table BEST_BIDS drop constraint FKF4ABD49138904A85
alter table BIDS drop constraint FK1F1B1638904A85
alter table BOOK drop constraint FK1F32E978D5D654
alter table BOOK drop constraint FK1F32E94C01F0EF
alter table BOOK_OFFERS drop constraint FK21F087AD458F91F6
drop table ACCOUNTS if exists
drop table ACCOUNT_HOLDINGS if exists
drop table ASKS if exists
drop table BEST_ASKS if exists
drop table BEST_BIDS if exists
drop table BIDS if exists
drop table BOOK if exists
drop table BOOK_OFFERS if exists
drop table CASHBANKS if exists
drop table CBANK_POS_TOKENS if exists
drop table CLAIMS if exists
drop table COUPONBANKS if exists
drop table COUPONS if exists
drop table CURRENCYTOKENS if exists
drop table FUNDSS if exists
drop table MARKET if exists
drop table MARKETMAKER if exists
drop table MM_Probabilities if exists
drop table MOCKDATA if exists
drop table ORDERREMOVALS if exists
drop table ORDER_TBL if exists
drop table OUTCOME if exists
drop table POSITIONS if exists
drop table REDEMPTIONS if exists
drop table SELFDEALING if exists
drop table SORTEDORDERS if exists
drop table SORTEDORDERS_POS_ORDER if exists
drop table TRADES if exists
drop table UNCONFIRMED_USERS if exists
drop table USERS if exists
create table ACCOUNTS (ACCOUNTS_ID bigint not null, cash bigint not null, primary key (ACCOUNTS_ID))
create table ACCOUNT_HOLDINGS (ACCOUNTS_ID bigint not null, COUPONS_ID bigint not null, POSITIONS_ID bigint not null, primary key (ACCOUNTS_ID, POSITIONS_ID))
create table ASKS (ASKS_ID bigint not null, owner varchar(255), price numeric, priceMax numeric, quant numeric, time timestamp, pos bigint not null, primary key (ASKS_ID))
create table BEST_ASKS (BEST_ASKS_ID bigint not null, owner varchar(255), price numeric, priceMax numeric, quant numeric, time timestamp, pos bigint not null, primary key (BEST_ASKS_ID))
create table BEST_BIDS (BEST_BIDS_ID bigint not null, owner varchar(255), price numeric, priceMax numeric, quant numeric, time timestamp, pos bigint not null, primary key (BEST_BIDS_ID))
create table BIDS (BID_ID bigint not null, owner varchar(255), price numeric, priceMax numeric, quant numeric, time timestamp, pos bigint not null, primary key (BID_ID))
create table BOOK (BOOK_ID bigint not null, BOOK_TYPE varchar(255) not null, market bigint not null, claim bigint not null, primary key (BOOK_ID), unique (market))
create table BOOK_OFFERS (BOOK_ID bigint not null, SORTEDORDERS_ID bigint not null, POSITIONS_ID bigint not null, primary key (BOOK_ID, POSITIONS_ID))
create table CASHBANKS (CASHBANK_ID bigint not null, token bigint not null, primary key (CASHBANK_ID), unique (token))
create table CBANK_POS_TOKENS (COUPONBANK_ID bigint not null, CURRENCYTOKEN_ID bigint not null, positions bigint not null, primary key (COUPONBANK_ID, positions))
create table CLAIMS (CLAIMS_ID bigint not null, CLAIM_TYPE varchar(255) not null, name varchar(255), owner bigint not null, description varchar(255), primary key (CLAIMS_ID))
create table COUPONBANKS (COUPONBANK_ID bigint not null, minted numeric, redeemed numeric, FUNDS_ID bigint not null, claim bigint not null, primary key (COUPONBANK_ID), unique (FUNDS_ID))
create table COUPONS (COUPONS_ID bigint not null, quant numeric, token bigint not null, POSITIONS_ID bigint not null, primary key (COUPONS_ID))
create table CURRENCYTOKENS (CURRENCYTOKEN_ID bigint not null, name varchar(255), primary key (CURRENCYTOKEN_ID))
create table FUNDSS (FUNDS_ID bigint not null, quant numeric, token bigint not null, primary key (FUNDS_ID))
create table MARKET (MARKETS_ID bigint not null, MARKET_TYPE varchar(255) not null, priceBetteringRequired bit, wholeShareTradingOnly bit, lastTrade timestamp, marketClosed bit, owner bigint not null, couponMint bigint not null, Outcome_ID bigint, claim bigint not null, maxPrice numeric, maxPriceMax numeric, primary key (MARKETS_ID), unique (Outcome_ID))
create table MARKETMAKER (MARKETMAKER_ID bigint not null, MarketMaker_TYPE varchar(255) not null, beta numeric, market bigint not null, accounts bigint not null, probability numeric, primary key (MARKETMAKER_ID), unique (market), unique (accounts))
create table MM_Probabilities (MARKETMAKER_ID bigint not null, probability numeric, POSITIONS_ID bigint not null, primary key (MARKETMAKER_ID, POSITIONS_ID))
create table MOCKDATA (DATUM_ID bigint not null, title varchar(255), primary key (DATUM_ID))
create table ORDERREMOVALS (ORDERREMOVAL_ID bigint not null, owner varchar(255), price numeric, priceMax numeric, quant numeric, fullfilledQuant numeric, voidedQuant numeric, time timestamp, pos bigint not null, primary key (ORDERREMOVAL_ID))
create table ORDER_TBL (ORDER_ID bigint not null, price numeric, priceMax numeric, quant numeric, fullfilled numeric, voided numeric, USER_ID bigint not null, POSITIONS_ID bigint not null, primary key (ORDER_ID))
create table OUTCOME (OUTCOME_ID bigint not null, OUTCOME_TYPE varchar(255) not null, continuous bit, POSITIONS_ID bigint, primary key (OUTCOME_ID))
create table POSITIONS (POSITIONS_ID bigint not null, name varchar(255), CLAIMS_ID bigint not null, idx integer, primary key (POSITIONS_ID))
create table REDEMPTIONS (Redemption_ID bigint not null, owner varchar(255), price numeric, priceMax numeric, quant numeric, time timestamp, pos bigint not null, primary key (Redemption_ID))
create table SELFDEALING (SELFDEALING_ID bigint not null, owner varchar(255), price numeric, priceMax numeric, quant numeric, time timestamp, pos bigint not null, primary key (SELFDEALING_ID))
create table SORTEDORDERS (SORTEDORDERS_ID bigint not null, POSITIONS_ID bigint not null, samplePrice numeric, samplePriceMax numeric, primary key (SORTEDORDERS_ID))
create table SORTEDORDERS_POS_ORDER (SORTEDORDERS_ID bigint not null, ORDER_ID bigint not null, primary key (SORTEDORDERS_ID, ORDER_ID), unique (ORDER_ID))
create table TRADES (TRADE_ID bigint not null, TRADE_TYPE varchar(255) not null, owner varchar(255), price numeric, priceMax numeric, quant numeric, time timestamp, pos bigint not null, openingPrice numeric, openingPriceMax numeric, closingPrice numeric, closingPriceMax numeric, primary key (TRADE_ID))
create table UNCONFIRMED_USERS (USER_ID bigint not null, name varchar(255), emailAddress varchar(255), password varchar(255), confirmationToken varchar(255), primary key (USER_ID))
create table USERS (USER_ID bigint not null, name varchar(255), email varchar(255), hashedPassword varbinary(255), accounts bigint not null, primary key (USER_ID), unique (accounts))
alter table ACCOUNTS add constraint FKAF43ABE618085ABA foreign key (cash) references FUNDSS
alter table ACCOUNT_HOLDINGS add constraint FKAB0B6C024BC7993 foreign key (COUPONS_ID) references COUPONS
alter table ACCOUNT_HOLDINGS add constraint FKAB0B6C023AA42D41 foreign key (POSITIONS_ID) references POSITIONS
alter table ACCOUNT_HOLDINGS add constraint FKAB0B6C02F513C021 foreign key (ACCOUNTS_ID) references ACCOUNTS
alter table ASKS add constraint FK1ECD1A38904A85 foreign key (pos) references POSITIONS
alter table BEST_ASKS add constraint FKF4AB869538904A85 foreign key (pos) references POSITIONS
alter table BEST_BIDS add constraint FKF4ABD49138904A85 foreign key (pos) references POSITIONS
alter table BIDS add constraint FK1F1B1638904A85 foreign key (pos) references POSITIONS
alter table BOOK add constraint FK1F32E978D5D654 foreign key (market) references MARKET
alter table BOOK add constraint FK1F32E94C01F0EF foreign key (claim) references CLAIMS
alter table BOOK_OFFERS add constraint FK21F087AD458F91F6 foreign key (BOOK_ID) references BOOK
alter table BOOK_OFFERS add constraint FK21F087ADAF241F6D foreign key (SORTEDORDERS_ID) references SORTEDORDERS
